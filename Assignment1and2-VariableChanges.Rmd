---
title: "Assignment 1 and 2 - Variable Changes"
author: "Whytne Stevens"
date: "9/19/2020"
output: html_document
---
# Assignment 1 and 2 - Variable Changes
While working on assignment 3 I realized I needed to change some of my variables due to overly detailed variables that were making my analysis more complex.I still am interested in looking at whether there's a connection between one's profession, English language proficiency,household language and their income and income to poverty ratio. I stll narrowed down my analysis to person level data for Dallas County, Texas  from Public Use Microdata Sample (PUMAs) provided by the 2018 1 year American Community Survey. I have selected the following variables to explore this question:


Class of Worker (COW) (categorical)

English ability (ENG) (categorical)

Household Language (HHL) (categorical)

Food Stamps (FS)(Categorical)

Income (PINCP) (continuous)

Work hours per week (WKHP) (continuous)

Income to Poverty Ratio (POVPIP) (continuous)

Adjustment factor for income and earnings dollar amounts (6 implied decimal places) (ADJINC)(Continuous)*

*used for PINCP Variable

## Variables I added and took away
In place of the specific occupation variable, I used class of worker since this simplifies the occupations to the type of employee a person is as opposed to their particular occupation, therefore simplifying my analysis added food stamps to better understand who might be receiving public assistance of some sort since public assistance is usually used as an indicator of some type of financial hardship if not poverty. I also added household language as I wanted to see if there are some correlations there as it relates to languages and income/poverty. As for the variables I took away, race, sex, and specific occupation weren't necessarily adding to my analysis and if anything were complicating it further, particularly the specific occupation and race variables.

# Set Up and Data Output
I also set everything below as in Assignment 1

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo=TRUE, warning=FALSE, message=FALSE)
```

```{r load libraries}
library(tidycensus)
library(tidyverse)
```

```{r load person-level microdata variables}
person_vars_2018 <- pums_variables %>%
  distinct(year, survey, var_code, 
           var_label, data_type, level) %>%
  filter(level == "person", year == 2018, survey == "acs1")
```

```{r load ACS area variables}
area_vars_2018 <- load_variables(2018, "acs1")
```

```{r message=FALSE, results='hide'}
dallas_county <- c("02301", "02302", "02303", "02304", "02308", "02317", "02318", "02319", "02320", "02321", "02322")
```

```{r load person-level data, results= 'hide'}
person_data_new <- get_pums(variables = c("PUMA",
                                      "COW",
                                      "HHL",
                                      "ENG",
                                      "FS",
                                      "PINCP", 
                                      "WKHP", 
                                      "POVPIP",
                                      "ADJINC"),
                        state = "TX",
                        year = 2018, 
                        survey = "acs1",
                        recode = TRUE) %>% 
  filter(PUMA == dallas_county,
         PINCP > 0,
         WKHP > 0,
         POVPIP > 0) %>%
  select(COW_label, HHL_label, ENG_label, FS_label, PINCP, WKHP, POVPIP)
```

```{r load person_data_new}
 head(person_data_new, 1)
 tail(person_data_new, 596)
```
## Saving Data
Lastly, I saved my data to a csv file:

```{r write_csv}
write_csv(person_data_new, "persondatanew.csv")
```

